# 구글 스프레드시트 기반 배달 관리 시스템 (MVP) - Task Todo List

## Phase 1: 필수 기능 개발

### 1. 프로젝트 초기 설정
- [x] Node.js + Express.js 백엔드 프로젝트 구조 생성
- [x] Vue.js 3 + Composition API 프론트엔드 프로젝트 구조 생성
- [x] TypeScript 설정 및 ESLint, Prettier 구성
- [x] 환경 변수 설정 (.env 파일)
- [x] 프로젝트 종속성 설치 및 패키지 관리

### 2. 백엔드 API 서버 구축
- [x] Express.js 서버 기본 설정
- [x] CORS, 세션, 미들웨어 설정
- [x] Winston을 이용한 로깅 시스템 구현
- [x] 에러 핸들링 미들웨어 구현
- [x] RESTful API 라우트 구조 설계

### 3. Google OAuth2 인증 시스템
- [ ] Google Cloud Console 프로젝트 생성 및 OAuth2 설정
- [x] Google OAuth2 클라이언트 라이브러리 연동
- [x] OAuth2 인증 플로우 구현 (백엔드)
- [x] 인증 콜백 처리 및 토큰 관리
- [x] 세션 기반 인증 상태 관리
- [x] 자동 토큰 갱신 미들웨어 구현
- [x] API 실패 시 토큰 갱신 후 재시도 로직 구현
- [x] 토큰 만료 시간 추적 및 사전 갱신 구현

### 4. Google Sheets API 연동
- [x] Google Sheets API v4 클라이언트 설정
- [x] 스프레드시트 목록 조회 API 구현
- [x] 스프레드시트 연결 및 검증 로직
- [x] 시트별 데이터 읽기/쓰기 기능 구현
- [ ] 실시간 동기화 로직 (폴링 방식)

### 5. 관리자 설정 UI (Vue.js)
- [x] Vue.js 3 프로젝트 설정 (Vite, Vue Router, Pinia)
- [x] Vuetify 3 UI 프레임워크 설정
- [x] 관리자 대시보드 기본 레이아웃
- [x] Google OAuth 인증 버튼 및 플로우 구현
- [x] 스프레드시트 목록 조회 및 선택 컴포넌트
- [x] 스프레드시트 연결 상태 표시
- [x] 배달담당자 시트 관리 인터페이스
- [x] 관리자 설정 UI Playwright E2E 테스트 구현
- [x] Google/SOLAPI 연동 상태 실시간 업데이트 기능 (백엔드 API)
- [x] 백엔드 인증 상태 확인 API 구현 (/api/auth/status)
- [x] 백엔드 통합 로그아웃 API 구현 (/api/auth/logout)
- [x] Pinia auth store에 상태 확인 및 로그아웃 메서드 추가
- [x] 프론트엔드 UI에 로그아웃 버튼 및 상태 자동 업데이트 구현
- [x] OAuth 콜백 후 상태 자동 새로고침 기능 구현
- [x] URL 파라미터 감지 및 정리 기능 구현

### 5-1. 캘린더 기반 데이터 조회 시스템 (간소화된 워크플로우)
- [x] 캘린더 컴포넌트 구현 (Vuetify date picker)
- [x] 날짜 선택 시 YYYYMMDD 형식 시트 검색 API 구현
- [x] 백엔드 YYYYMMDD 시트 데이터 조회 API (/api/sheets/date/:date)
- [x] 시트 데이터 테이블 표시 컴포넌트 구현
- [x] 컬럼별 필터 기능 구현 (텍스트, 선택, 날짜 필터)
- [x] 필터링된 데이터 실시간 업데이트
- [x] 데이터 정렬 기능 (컬럼 클릭)
- [x] 페이지네이션 구현 (대량 데이터 처리)
- [ ] 데이터 내보내기 기능 (CSV, Excel)
- [x] 캘린더 + 데이터 테이블 통합 레이아웃
- [x] Google 인증 후 즉시 캘린더 표시 (스프레드시트 선택 단계 제거)
- [x] 첫 번째 사용 가능한 스프레드시트 자동 선택
- [x] QR 코드 모달 다이얼로그 UI 개선
- [x] 관리자 UI에서 불필요한 버튼 제거 (배달담당자 추가, 휴지통 버튼)
- [x] 배달 담당자별 데이터 그룹화 및 표시 기능 구현
- [x] 헤더 컬럼에서 담당자 자동 인식 로직 구현
- [x] 담당자 선택 드롭다운 필터 기능 구현
- [x] 배달 담당자별 모바일 웹페이지 동적 생성 기능
- [x] QR 코드를 통한 담당자별 필터링된 데이터 접근
- [x] 모바일 최적화된 담당자별 배달 관리 인터페이스

### 6. SOLAPI OAuth2 연동 시스템 (OAuth2 방식, SDK 아님)
- [ ] SOLAPI 개발자 계정 및 앱 등록
- [x] SOLAPI OAuth2 인증 플로우 구현 (https://developers.solapi.com/references/authentication/oauth2-3/oauth2 문서 기반)
- [x] Access Token 및 Refresh Token 관리
- [x] 발신번호 목록 조회 API
- [x] 계정 정보 및 잔액 조회 기능
- [x] 템플릿 관리 시스템

### 7. SOLAPI 메시지 발송 시스템 (OAuth2 방식)
- [x] SOLAPI OAuth2 기반 메시지 발송 API 구현
- [x] 카카오톡 메시지 발송 기능
- [x] 메시지 템플릿 관리
- [x] 발송 결과 처리 및 로깅
- [ ] 실패 시 재발송 로직

### 8. QR 코드 시스템
- [x] qrcode 라이브러리를 이용한 QR 코드 생성
- [x] 시트명 기반 고유 URL 생성 로직
- [x] JWT 기반 QR 토큰 생성 및 검증
- [x] 보안 해시 토큰 구현 (시트명 + 보안키 + 날짜)
- [x] QR 코드 이미지 생성 및 다운로드 API

### 9. 배달담당자 웹사이트 (Vue.js)
- [x] 배달담당자용 모바일 최적화 인터페이스
- [x] QR 코드 스캔 및 토큰 검증 페이지
- [x] 본인 이름 확인 인증 시스템
- [x] 배달 목록 조회 컴포넌트
- [x] 배달 상태 업데이트 버튼 (5단계 상태 시스템)
- [x] 실시간 상태 동기화
- [x] QR 코드 모달 다이얼로그 (카메라 스캔용)
- [x] 배송지/전화번호/고객명 복사 버튼 구현
- [x] 배송 미완료/완료 필터링 시스템

### 10. 배달 상태 관리 시스템
- [x] 배달 상태 워크플로우 구현 (5단계: 주문완료→상품준비중→배송준비중→배송출발→배송완료)
- [x] 동적 상태 컬럼 감지 및 업데이트 API (배송상태 헤더 기준)
- [x] 상태 변경 권한 로직 (배달담당자는 배송준비중/배송출발/배송완료만 변경 가능)
- [x] 스프레드시트 동기화 로직 개선
- [ ] 배달 완료 시 자동 메시지 발송 (SOLAPI 연동 필요)
- [x] 배달 진행률 표시

## Phase 2: 부가 기능 및 개선

### 11. 스프레드시트 자동 관리
- [ ] 배달담당자명 입력 시 시트 자동 생성
- [ ] 시트 구조 템플릿 자동 적용 (A:고객명, B:연락처, C:주소, D:배달상태)
- [ ] 시트 이름 유효성 검증
- [ ] 중복 시트명 방지 로직

### 12. 실시간 동기화 고도화
- [ ] WebSocket 또는 Server-Sent Events 구현
- [ ] 다중 클라이언트 동시 접속 관리
- [ ] 실시간 배달 상태 브로드캐스트
- [ ] 충돌 감지 및 해결 로직

### 13. 보안 강화
- [ ] QR 토큰 만료 시간 관리
- [ ] 접근 제어 및 권한 관리
- [ ] 개인정보 보호 처리
- [ ] SQL Injection 및 XSS 방지
- [ ] HTTPS 설정 및 보안 헤더

### 14. 사용자 경험 개선
- [ ] PWA (Progressive Web App) 설정
- [ ] 모바일 반응형 디자인 완성
- [ ] 로딩 상태 및 에러 메시지 개선
- [ ] 오프라인 모드 지원
- [ ] 푸시 알림 기능

### 15. 관리자 기능 확장
- [ ] QR 코드 일괄 생성 및 다운로드
- [ ] 배달 진행 상황 대시보드
- [ ] 메시지 발송 통계 및 로그
- [ ] 시스템 상태 모니터링
- [ ] 백업 및 복원 기능

## Phase 3: 테스트 및 배포

### 16. 테스트 시스템
- [ ] 단위 테스트 (Jest) 구현
- [ ] 통합 테스트 API 테스트
- [ ] E2E 테스트 (Playwright) 구현
- [ ] OAuth 플로우 테스트
- [ ] 메시지 발송 테스트 (샌드박스)

### 17. 성능 최적화
- [ ] API 응답 시간 최적화
- [ ] 스프레드시트 동기화 성능 개선
- [ ] 프론트엔드 번들 최적화
- [ ] 이미지 및 정적 파일 최적화
- [ ] 캐싱 전략 구현

### 18. 배포 및 운영
- [ ] PM2 프로덕션 배포 설정
- [ ] Nginx 리버스 프록시 설정
- [ ] 도메인 및 SSL 인증서 설정
- [ ] 환경별 배포 스크립트 (개발/스테이징/프로덕션)
- [ ] 로그 모니터링 및 알림 시스템

### 19. 문서화 및 사용자 가이드
- [ ] API 문서화 (Swagger/OpenAPI)
- [ ] 설치 및 설정 가이드
- [ ] 사용자 매뉴얼 (관리자/배달담당자)
- [ ] 트러블슈팅 가이드
- [ ] 코드 문서화 및 주석

### 20. 운영 및 유지보수
- [ ] 시스템 상태 모니터링 구축
- [ ] 자동 백업 시스템
- [ ] 장애 대응 매뉴얼
- [ ] 업데이트 및 패치 프로세스
- [ ] 사용자 피드백 수집 시스템

## 기술적 체크리스트

### 백엔드 (Node.js + Express.js)
- [x] TypeScript 설정 및 타입 정의
- [x] Express.js 미들웨어 구성
- [x] Google APIs 클라이언트 라이브러리
- [x] SOLAPI OAuth2 인증 (SDK 아님, 직접 HTTP API 사용)
- [x] JWT 토큰 관리 (jsonwebtoken)
- [x] 세션 관리 (express-session)
- [x] QR 코드 생성 (qrcode)
- [x] 로깅 시스템 (winston)
- [x] 환경 변수 관리 (dotenv)

### 프론트엔드 (Vue.js 3)
- [x] Vue 3 Composition API
- [x] Vite 빌드 도구 설정
- [x] Vue Router 4 라우팅
- [x] Pinia 상태 관리
- [x] Vuetify 3 UI 프레임워크
- [x] Axios HTTP 클라이언트
- [x] PWA 플러그인 설정
- [x] TypeScript 지원

### 데이터베이스 및 저장소
- [x] Google Sheets를 메인 데이터 저장소로 활용
- [x] 세션 스토리지 (메모리 또는 Redis)
- [x] 로그 파일 저장소
- [x] 토큰 관리 (JWT stateless)

### DevOps 및 배포
- [x] Git 버전 관리
- [x] npm/yarn 패키지 관리
- [x] ESLint + Prettier 코드 품질
- [x] Jest 테스트 프레임워크
- [ ] PM2 프로세스 관리
- [ ] Nginx 웹서버 설정
- [ ] 도메인 및 SSL 설정

## 성능 목표 (MVP)
- [ ] 스프레드시트 동기화: 30개 주문 기준 10초 이내
- [ ] QR 코드 스캔: 스캔 후 5초 이내 페이지 로딩
- [ ] 메시지 발송: 배달 완료 버튼 클릭 후 3초 이내 발송
- [ ] 동시 접속: 최대 10명의 배달담당자 동시 접속 지원

## 보안 체크리스트
- [ ] OAuth2 토큰 안전한 저장
- [ ] QR 코드 토큰 보안 (해시 기반)
- [ ] 본인 인증 시스템 (2단계 인증)
- [ ] 개인정보 보호 처리
- [ ] 접근 제어 및 권한 관리
- [ ] HTTPS 및 보안 헤더 